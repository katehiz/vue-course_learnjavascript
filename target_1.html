<!DOCTYPE html>
<html>
<head>
	<title>Vue Course - Home Work #1</title>
	<meta charset="utf-8">
	<style type="text/css">
		[v-cloak] {
			display: none;
		}
	</style>
</head>
<body>
	
	<div id="app" v-cloak>
		<h1>Домашнее задание №1. Список пользователей.</h1>
		
		<button v-on:click='toggleUsersList' v-tooltip>
			{{ condition
			? 'Hide table'
			: 'Show table'}}
		</button>

		<div v-show='condition'>
			<h2>Всего пользователей: <span>{{ getUsersCount() }}</span></h2>
			<!-- <h2>Всего пользователей: <span>{{ users.length }}</span></h2> -->
			<table>
				<tr>
					<th>Аватар</th>
					<th>Имя</th>
					<th>Фамилия</th>
					<th>Отчество</th>
					<th></th>
				</tr>
				<tr v-for='(user, index) in users' v-bind:key='user.firstname'>
					<td><img width="100" v-bind:src='user.avatar'></td>
					<td>{{ user.firstname | capitalize }}</td>
					<td>{{ user.lastname }}</td>
					<td>{{ user.fathername }}</td>
					<td><button v-on:click='copyToBuffer(index)'>copy</button></td>
				</tr>
			</table>
		</div>
	</div>

	<script src="https://cdn.jsdelivr.net/npm/vue@2.6.10/dist/vue.js"></script>

	<script type="text/javascript">

		// определяем глобально директиву 'v-tooltip'
		Vue.directive('tooltip', {
		  inserted: function (el) {
		    el.setAttribute('title', 'Нажмите на кнопку, чтобы увиеть список пользователей');
		  }
		});

		// определяем глобально v-filter 'capitalize'
		Vue.filter('capitalize', function (value) {
			if (!value) return '';
			value = value.toString();
			return value.toUpperCase();
		});

		// экземпляр нанего приложения
		const app = new Vue({
			el: '#app',
            data: function() {
                return {
                    condition: false,
                    users: []
                }
            },
			methods: {
				getUsersCount: function () {
					return this.users.length;
				},
				toggleUsersList: function () {
					this.condition = !this.condition;
				},
				copyToBuffer: function (index) {
                    let user = this.users[index];
					// просто вывожу ФИО в консоль
					//console.log( [user.lastname, user.firstname, user.fathername].join(' ') );
					alert( [user.lastname, user.firstname, user.fathername].join(' ') );
				}
			},
			created: function () {
				this.users = [{
                    firstname: 'Василий',
                    lastname: 'Наумкин',
                    fathername: 'Викторович',
                    avatar: 'https://gravatar.com/avatar/3a1f53ab0678a39c3aad9f8669ad9f3a?s=200&d=mm'
                },
				{
					firstname: 'Владимир',
					lastname: 'Володин',
					fathername: 'Олегович',
					avatar: 'https://gravatar.com/avatar/546201f9fb47870f661eeb1db4727679?s=200&d=mm'
				},
				{
					firstname: 'Сергей',
					lastname: 'Шлоков',
					fathername: 'Геннадьевич',
					avatar: 'https://gravatar.com/avatar/70c08253158b8517d262ca672b66e4af?s=200&d=mm'
				},
				{
					firstname: 'Павел',
					lastname: 'Высоцкий',
					fathername: 'Степанович',
					avatar: 'https://gravatar.com/avatar/0c729e7f11c2d4ec9e8b15c8e93ed9dc?s=200&d=mm'
				},
				{
					firstname: 'Андрей',
					lastname: 'Степаненко',
					fathername: 'Александрович',
					avatar: 'https://gravatar.com/avatar/bfe7111f407519831a92b9378d89e68b?s=200&d=mm'
				}]
            }
		});
	</script>
</body>
</html>